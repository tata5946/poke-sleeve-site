<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ä¾¡æ ¼æ¨ç§»</title>
  <meta name="description" content="ãƒã‚±ã‚«ã‚¹ãƒªãƒ¼ãƒ–ã®å¹´æ¬¡å¹³å‡ä¾¡æ ¼æ¨ç§»ã‚’æ²è¼‰ã€‚éå»ã®ç›¸å ´å¤‰å‹•ã‚’ç¢ºèªã§ãã¾ã™ã€‚">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: sans-serif; margin: 40px; }
    a { color: #0b57d0; }
    .meta { color:#666; margin-top:6px; }
    .wrap { max-width: 900px; margin: 0 auto; }
  </style>
</head>
<body>
  <div class="wrap">
    <p><a href="./index.html">â† ä¸€è¦§ã«æˆ»ã‚‹</a></p>

    <h1 id="name">èª­ã¿è¾¼ã¿ä¸­â€¦</h1>
    <p>
æœ¬ãƒšãƒ¼ã‚¸ã§ã¯ã€æœªé–‹å°çŠ¶æ…‹ã®ãƒã‚±ã‚«ã‚¹ãƒªãƒ¼ãƒ–ã®å¹´æ¬¡å¹³å‡ä¾¡æ ¼æ¨ç§»ã‚’æ²è¼‰ã—ã¦ã„ã¾ã™ã€‚
éå»ã®ç›¸å ´å¤‰å‹•ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã§ã€ç¾åœ¨ã®å¸‚å ´å‚¾å‘ã‚„ä¾¡æ ¼ã®æ¨ç§»ã‚’æŠŠæ¡ã§ãã¾ã™ã€‚
ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚„å£²è²·åˆ¤æ–­ã®å‚è€ƒãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ã”æ´»ç”¨ãã ã•ã„ã€‚
    </p>
    <div id="meta" class="meta"></div>

    <div id="stats" style="border:1px solid #ddd; border-radius:10px; padding:12px; margin: 14px 0;">
  èª­ã¿è¾¼ã¿ä¸­â€¦
</div>

<p style="margin: 10px 0;">
  <a href="./ranking.html">ğŸ“ˆ ä¾¡æ ¼ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a> /
  <a href="./surge.html">ğŸš€ æ€¥ä¸Šæ˜‡ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a> /
  <a href="./growth.html">ğŸ”¥ é«˜é¨°ç‡ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
</p>
    
    <h2>å¹´æ¬¡å¹³å‡ä¾¡æ ¼æ¨ç§»</h2>
    <canvas id="priceChart" height="120"></canvas>
    <p style="font-size:12px; color:#666; margin-top:8px;">
æœ€çµ‚æ›´æ–°æ—¥ï¼š2026å¹´2æœˆæ›´æ–°
</p>
  </div>

  <script>
    function getId() {
      const params = new URLSearchParams(location.search);
      return params.get("id");
    }

    async function main() {
      const id = getId();
      if (!id) {
        document.getElementById("name").textContent = "IDãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“";
        return;
      }

      const res = await fetch("./data.json");
      const data = await res.json();
      const s = data.sleeves.find(x => x.id === id);

      if (!s) {
        document.getElementById("name").textContent = "ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“";
        return;
      }

      document.title = `${s.name}ï½œä¾¡æ ¼æ¨ç§»`;
      document.getElementById("name").textContent = s.name;
      document.getElementById("meta").textContent = `ç™ºå£²å¹´ï¼š${s.releaseYear} / ${s.condition} / ${s.series}`;

      const years = Object.keys(s.pricesByYear).sort();
      const prices = years.map(y => s.pricesByYear[y]);

      const latestYear = years[years.length - 1];
const latestPrice = Number(s.pricesByYear[latestYear]);

let statsHtml = `æœ€æ–°ï¼ˆ${latestYear}ï¼‰ï¼š${latestPrice.toLocaleString()}å††`;

if (years.length >= 2) {
  const prevYear = years[years.length - 2];
  const prevPrice = Number(s.pricesByYear[prevYear]);
  const diff = latestPrice - prevPrice;
  const pct = (diff / prevPrice) * 100;

  statsHtml += `<br>å‰å¹´å·®ï¼ˆ${prevYear}â†’${latestYear}ï¼‰ï¼š${diff.toLocaleString()}å††`;
  statsHtml += `<br>ä¸Šæ˜‡ç‡ï¼š${pct.toFixed(1)}%`;
} else {
  statsHtml += `<br>å‰å¹´å·®/ä¸Šæ˜‡ç‡ï¼šãƒ‡ãƒ¼ã‚¿ä¸è¶³`;
}

document.getElementById("stats").innerHTML = statsHtml;

      new Chart(document.getElementById("priceChart"), {
        type: "line",
        data: {
          labels: years,
          datasets: [{
            label: "å¹³å‡ä¾¡æ ¼ï¼ˆå††ï¼‰",
            data: prices,
            borderWidth: 2,
            tension: 0.2
          }]
        },
        options: {
          scales: { y: { beginAtZero: true } }
        }
      });
    }

    main();
  </script>
</body>
</html>
